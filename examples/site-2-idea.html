<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>An HTML Document</title>
    <link rel="shortcut icon" href="/favicon.ico"/>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
		<script src="/examples/js/webcomponents-hi-sd-ce.js"></script>
  </head>
  <body>
		<div style="width: 1000px; margin: 0 auto;">
			<h1>
				Een plan
			</h1>
			Dit is een voorbeeld met webcomponents
			
			<link rel="stylesheet" type="text/css" media="all"   href="/css/examples/elements.css"/>
			<link rel="stylesheet" type="text/css" media="all"   href="/css/examples/idea.css"/>
			<link rel="stylesheet" type="text/css" media="all"   href="/css/examples/argument.css"/>
			<script>

			 // idea widget met het juiste id
			 let id = window.location.href.replace(/^.*[?&]id=(\d+).*$/, '$1');
       var url = "/widget/site/2/idea/" + id;
			 var ideaWidget = document.createElement('link');
       ideaWidget.rel = 'import';
			 ideaWidget.href = url;
       document.head.appendChild(ideaWidget)

			 // bijbehorende argumenten
			 var argumentsWidget = document.createElement('link');
       argumentsWidget.rel = 'import';
			 argumentsWidget.href = url + '/argument';
			 document.head.appendChild(argumentsWidget)

			</script>

			<idea-widget afterFetchCallback="" afterVoteCallback="">idea</idea-widget>
			<arguments-widget>arguments</arguments-widget>

			<script src="js/number-buttons.js"></script>
			<script>

			 document.querySelector('idea-widget').setAttribute('data-id', id);
			 
			 window.addEventListener("load", function() {
				 setTimeout(()=>{ // TODO: waarom werkt onload niet goed?
			     initNumberButton(document.querySelector('idea-widget').shadowRoot.querySelector('idea-votes-for-button'));
					 initNumberButton(document.querySelector('idea-widget').shadowRoot.querySelector('idea-votes-against-button'));
				 }, 2000);
  		 }); 
			</script>

		</div>
  </body>
</html>
