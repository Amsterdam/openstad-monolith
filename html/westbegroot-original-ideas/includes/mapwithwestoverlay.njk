{% import 'includes/content.njk' as content %}
{% macro map(runningIdeas, clickable) %}
	{{content.map(cookieConsent)}}
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCauwsJ_4I3ri0rI-O5-82ncLLO_Cji8YY"></script>
	<script src="/originele-plannen/js/map.js"></script>
	<script>
	 // Interactive map
	 // ---------------
	 var map;
	 (function() {
		 var bounds;
		 map = initMap(document.getElementById('map'), {
			 center            : {lat: 52.3666477, lng: 4.8544886},
			 zoom              : 14,
			 minZoom           : 0,
			 maxZoom           : 17,
			 draggable         : true,
			 keyboardShortcuts : false,
			 scrollwheel       : false,
			 zoomControl       : true
		 });

		 var everythingElse = [
			 {lat:  0, lng: -80}, // north west
			 {lat:  0, lng:  80}, // south west
			 {lat: 80, lng:  80}, // south east
			 {lat: 80, lng: -80}	// north east
		 ];

		 var westPloygon = [{ lng: 4.8353454, lat: 52.373126499999998 }, { lng: 4.8422025, lat: 52.372100199999998 }, { lng: 4.8421761, lat: 52.369583599999999 }, { lng: 4.8455807, lat: 52.369636900000003 }, { lng: 4.8476385, lat: 52.369852999999999 }, { lng: 4.8477361, lat: 52.369588499999999 }, { lng: 4.8484176, lat: 52.369697000000002 }, { lng: 4.8504835, lat: 52.365330200000002 }, { lng: 4.8504956, lat: 52.364369199999999 }, { lng: 4.8501587, lat: 52.363837599999997 }, { lng: 4.8494487, lat: 52.363300099999996 }, { lng: 4.8495059, lat: 52.361098900000002 }, { lng: 4.8489152, lat: 52.360814900000001 }, { lng: 4.8487824, lat: 52.357865799999999 }, { lng: 4.8504012, lat: 52.357855299999997 }, { lng: 4.8518982, lat: 52.357844 }, { lng: 4.8538275, lat: 52.358129499999997 }, { lng: 4.854723, lat: 52.357862900000001 }, { lng: 4.854635, lat: 52.357753199999998 }, { lng: 4.85436, lat: 52.357297500000001 }, { lng: 4.8540881, lat: 52.356402600000003 }, { lng: 4.8547969, lat: 52.356275799999999 }, { lng: 4.8698903, lat: 52.360106700000003 }, { lng: 4.8699397, lat: 52.360023099999999 }, { lng: 4.8714122, lat: 52.360373699999997 }, { lng: 4.8712647, lat: 52.360563399999997 }, { lng: 4.8715288, lat: 52.360599700000002 }, { lng: 4.8716826, lat: 52.360427700000002 }, { lng: 4.8738605, lat: 52.360853300000002 }, { lng: 4.8738525, lat: 52.361021299999997 }, { lng: 4.8740097, lat: 52.361040699999997 }, { lng: 4.8741351, lat: 52.360893500000003 }, { lng: 4.8750611, lat: 52.360804100000003 }, { lng: 4.8756501, lat: 52.360613800000003 }, { lng: 4.876429, lat: 52.3607996 }, { lng: 4.8765642, lat: 52.360617699999999 }, { lng: 4.876929, lat: 52.360695700000001 }, { lng: 4.8768495, lat: 52.360911000000002 }, { lng: 4.8771709, lat: 52.360969599999997 }, { lng: 4.8774, lat: 52.360758300000001 }, { lng: 4.8819952, lat: 52.362042700000003 }, { lng: 4.8813956, lat: 52.363081800000003 }, { lng: 4.8808146, lat: 52.363490400000003 }, { lng: 4.8793708, lat: 52.3643261 }, { lng: 4.8792691, lat: 52.364957400000002 }, { lng: 4.8787082, lat: 52.365820599999999 }, { lng: 4.8775395, lat: 52.366781500000002 }, { lng: 4.8767523, lat: 52.368511699999999 }, { lng: 4.8754901, lat: 52.369786699999999 }, { lng: 4.8745065, lat: 52.3718772 }, { lng: 4.8745782, lat: 52.3725454 }, { lng: 4.8753796, lat: 52.373407 }, { lng: 4.8755899, lat: 52.374302499999999 }, { lng: 4.8799131, lat: 52.3813052 }, { lng: 4.8796339, lat: 52.381912800000002 }, { lng: 4.880478, lat: 52.3822531 }, { lng: 4.8818058, lat: 52.384352800000002 }, { lng: 4.882637, lat: 52.385410700000001 }, { lng: 4.8846503, lat: 52.388346599999998 }, { lng: 4.8857963, lat: 52.388147600000003 }, { lng: 4.8911796, lat: 52.388450200000001 }, { lng: 4.8937804, lat: 52.388671199999997 }, { lng: 4.8956658, lat: 52.3888313 }, { lng: 4.8927982, lat: 52.3933453 }, { lng: 4.8850924, lat: 52.398823999999998 }, { lng: 4.8762366, lat: 52.394528700000002 }, { lng: 4.8726422, lat: 52.394820600000003 }, { lng: 4.8719896, lat: 52.394719199999997 }, { lng: 4.8719508, lat: 52.395276600000003 }, { lng: 4.8715979, lat: 52.395380000000003 }, { lng: 4.8667403, lat: 52.393135999999998 }, { lng: 4.8643092, lat: 52.392707199999997 }, { lng: 4.8627057, lat: 52.393852099999997 }, { lng: 4.8603441, lat: 52.394938199999999 }, { lng: 4.858593, lat: 52.3952782 }, { lng: 4.8569204, lat: 52.395366699999997 }, { lng: 4.8569896, lat: 52.393836299999997 }, { lng: 4.8573172, lat: 52.393842399999997 }, { lng: 4.8574043, lat: 52.3920751 }, { lng: 4.8589526, lat: 52.391222599999999 }, { lng: 4.8592744, lat: 52.390543399999999 }, { lng: 4.8592929, lat: 52.388789899999999 }, { lng: 4.8449045, lat: 52.388773299999997 }, { lng: 4.8451066, lat: 52.3850658 }, { lng: 4.8446526, lat: 52.385063799999998 }, { lng: 4.8390117, lat: 52.385024100000003 }, { lng: 4.8392807, lat: 52.382968699999999 }, { lng: 4.838548, lat: 52.380876600000001 }, { lng: 4.836707, lat: 52.376358099999997 }, { lng: 4.8353454, lat: 52.37312649999999 }];
		 var westPloygon = [{ lng: 4.851, lat: 52.359999999999999}, { lng: 4.864, lat: 52.375}, { lng: 4.875, lat: 52.377000000000002}, { lng: 4.879, lat: 52.375999999999998}, { lng: 4.88, lat: 52.370000000000005}, { lng: 4.886, lat: 52.363}, { lng: 4.886, lat: 52.359999999999999}, { lng: 4.884, lat: 52.358000000000004}, { lng: 4.872, lat: 52.356999999999999}, { lng: 4.856, lat: 52.352000000000004}, { lng: 4.851, lat: 52.353000000000002}, { lng: 4.851, lat: 52.359999999999999}];
		 var deBaarsjesPolygon = [{ lng: 4.8422025, lat: 52.372100199999998},{ lng: 4.8421761, lat: 52.369583599999999},{ lng: 4.8455807, lat: 52.369636900000003},{ lng: 4.8476385, lat: 52.369852999999999},{ lng: 4.8477361, lat: 52.369588499999999},{ lng: 4.8484176, lat: 52.369697000000002},{ lng: 4.8504835, lat: 52.365330200000002},{ lng: 4.8504956, lat: 52.364369199999999},{ lng: 4.8501587, lat: 52.363837599999997},{ lng: 4.8494487, lat: 52.363300099999996},{ lng: 4.8495059, lat: 52.361098900000002},{ lng: 4.8489152, lat: 52.360814900000001},{ lng: 4.8487824, lat: 52.357865799999999},{ lng: 4.8518982, lat: 52.357844},{ lng: 4.8538275, lat: 52.358129499999997},{ lng: 4.854723, lat: 52.357862900000001},{ lng: 4.857383, lat: 52.361604399999997},{ lng: 4.8593457, lat: 52.363724900000001},{ lng: 4.8600959, lat: 52.364644699999999},{ lng: 4.866352, lat: 52.371585600000003},{ lng: 4.8672064, lat: 52.372624899999998},{ lng: 4.866565, lat: 52.373279599999996},{ lng: 4.8651313, lat: 52.374456600000002},{ lng: 4.864969, lat: 52.374607099999999},{ lng: 4.8646014, lat: 52.375342199999999},{ lng: 4.8555143, lat: 52.374358999999998},{ lng: 4.8525852, lat: 52.373540900000002},{ lng: 4.8467801, lat: 52.372305599999997},{ lng: 4.8422025, lat: 52.372100199999998}];
		 var westPloygon = [{ lng: 4.8353454, lat: 52.3731265 }, { lng: 4.8422025, lat: 52.3721002 }, { lng: 4.8421761, lat: 52.3695836 }, { lng: 4.8455807, lat: 52.3696369 }, { lng: 4.8476385, lat: 52.369853 }, { lng: 4.8477361, lat: 52.3695885 }, { lng: 4.8484176, lat: 52.369697 }, { lng: 4.8504835, lat: 52.3653302 }, { lng: 4.8504956, lat: 52.3643692 }, { lng: 4.8501587, lat: 52.3638376 }, { lng: 4.8494487, lat: 52.3633001 }, { lng: 4.8495059, lat: 52.3610989 }, { lng: 4.8489152, lat: 52.3608149 }, { lng: 4.8487824, lat: 52.3578658 }, { lng: 4.8504012, lat: 52.3578553 }, { lng: 4.8518982, lat: 52.357844 }, { lng: 4.8538275, lat: 52.3581295 }, { lng: 4.854723, lat: 52.3578629 }, { lng: 4.854635, lat: 52.3577532 }, { lng: 4.85436, lat: 52.3572975 }, { lng: 4.8540881, lat: 52.3564026 }, { lng: 4.8547969, lat: 52.3562758 }, { lng: 4.8698903, lat: 52.3601067 }, { lng: 4.8699397, lat: 52.3600231 }, { lng: 4.8714122, lat: 52.3603737 }, { lng: 4.8712647, lat: 52.3605634 }, { lng: 4.8715288, lat: 52.3605997 }, { lng: 4.8716826, lat: 52.3604277 }, { lng: 4.8738605, lat: 52.3608533 }, { lng: 4.8738525, lat: 52.3610213 }, { lng: 4.8740097, lat: 52.3610407 }, { lng: 4.8741351, lat: 52.3608935 }, { lng: 4.8750611, lat: 52.3608041 }, { lng: 4.8756501, lat: 52.3606138 }, { lng: 4.876429, lat: 52.3607996 }, { lng: 4.8765642, lat: 52.3606177 }, { lng: 4.876929, lat: 52.3606957 }, { lng: 4.8768495, lat: 52.360911 }, { lng: 4.8771709, lat: 52.3609696 }, { lng: 4.8774, lat: 52.3607583 }, { lng: 4.8819952, lat: 52.3620427 }, { lng: 4.8813956, lat: 52.3630818 }, { lng: 4.8808146, lat: 52.3634904 }, { lng: 4.8793708, lat: 52.3643261 }, { lng: 4.8792691, lat: 52.3649574 }, { lng: 4.8787082, lat: 52.3658206 }, { lng: 4.8775395, lat: 52.3667815 }, { lng: 4.8767523, lat: 52.3685117 }, { lng: 4.8754901, lat: 52.3697867 }, { lng: 4.8745065, lat: 52.3718772 }, { lng: 4.8745782, lat: 52.3725454 }, { lng: 4.8753796, lat: 52.373407 }, { lng: 4.8755899, lat: 52.3743025 }, { lng: 4.8799131, lat: 52.3813052 }, { lng: 4.8796339, lat: 52.3819128 }, { lng: 4.880478, lat: 52.3822531 }, { lng: 4.8818058, lat: 52.3843528 }, { lng: 4.882637, lat: 52.3854107 }, { lng: 4.8846503, lat: 52.3883466 }, { lng: 4.8857963, lat: 52.3881476 }, { lng: 4.8911796, lat: 52.3884502 }, { lng: 4.8937804, lat: 52.3886712 }, { lng: 4.8956658, lat: 52.3888313 }, { lng: 4.8927982, lat: 52.3933453 }, { lng: 4.8850924, lat: 52.398824 }, { lng: 4.8762366, lat: 52.3945287 }, { lng: 4.8726422, lat: 52.3948206 }, { lng: 4.8719896, lat: 52.3947192 }, { lng: 4.8719508, lat: 52.3952766 }, { lng: 4.8715979, lat: 52.39538 }, { lng: 4.8667403, lat: 52.393136 }, { lng: 4.8643092, lat: 52.3927072 }, { lng: 4.8627057, lat: 52.3938521 }, { lng: 4.8603441, lat: 52.3949382 }, { lng: 4.858593, lat: 52.3952782 }, { lng: 4.8569204, lat: 52.3953667 }, { lng: 4.8569896, lat: 52.3938363 }, { lng: 4.8573172, lat: 52.3938424 }, { lng: 4.8574043, lat: 52.3920751 }, { lng: 4.8589526, lat: 52.3912226 }, { lng: 4.8592744, lat: 52.3905434 }, { lng: 4.8592929, lat: 52.3887899 }, { lng: 4.8449045, lat: 52.3887733 }, { lng: 4.8451066, lat: 52.3850658 }, { lng: 4.8446526, lat: 52.3850638 }, { lng: 4.8390117, lat: 52.3850241 }, { lng: 4.8392807, lat: 52.3829687 }, { lng: 4.838548, lat: 52.3808766 }, { lng: 4.836707, lat: 52.3763581 }, { lng: 4.8353454, lat: 52.3731265 }];

		 map.data.setStyle({
			 strokeColor: '#d00',
			 strokeOpacity: 1,
			 strokeWeight: 2,
			 fillColor: '#000',
			 //			 fillOpacity: 0.2
		   fillOpacity: 0.002
		 });

		 map.data.add({
			 geometry: new google.maps.Data.Polygon( [everythingElse, westPloygon] )
		 })

		 var ideas = [
			 // {% for idea in runningIdeas %}
			 // {% if idea.isRunning() %}
			 {id: {{idea.id}}, location: JSON.parse('{{idea.location | dump | safe}}' || null)},
			 // {% endif %}
			 // {% endfor %}
		 ];
		 ideas.forEach(function( idea ) {
			 if( !idea.location ) return;
			 var point  = idea.location;
			 var marker = initMarker({
				 position  : {lat: point.coordinates[0], lng: point.coordinates[1]},
				 map       : map,
				 clickable : {{clickable or false}},
				 icon      : {
					 url     : '/img/flag_small.svg',
					 size    : new google.maps.Size(22, 24),
					 anchor  : new google.maps.Point(4, 21)
				 }
			 });
			 if ({{clickable or false}}) {
				 marker.addListener('click', function() {
					 window.location.href = '/originele-plannen/plan/'+idea.id;
				 });
			 }
		 });
	 })();
	</script>
{% endmacro %}

{% macro addOverlayToLocationEditor(location) %}
	// add baarsjes overlay to location editor. ToDo: merge with the block above

	map.setCenter({lat: 52.3666477, lng: 4.8544886})
	map.setZoom(14)

	var everythingElse = [
	{lat:	0, lng: -80}, // north west
	{lat:	0, lng:	 80}, // south west
	{lat: 80, lng:	 80}, // south east
	{lat: 80, lng: -80}	// north east
	];

	var westPloygon = [{ lng: 4.8353454, lat: 52.373126499999998 }, { lng: 4.8422025, lat: 52.372100199999998 }, { lng: 4.8421761, lat: 52.369583599999999 }, { lng: 4.8455807, lat: 52.369636900000003 }, { lng: 4.8476385, lat: 52.369852999999999 }, { lng: 4.8477361, lat: 52.369588499999999 }, { lng: 4.8484176, lat: 52.369697000000002 }, { lng: 4.8504835, lat: 52.365330200000002 }, { lng: 4.8504956, lat: 52.364369199999999 }, { lng: 4.8501587, lat: 52.363837599999997 }, { lng: 4.8494487, lat: 52.363300099999996 }, { lng: 4.8495059, lat: 52.361098900000002 }, { lng: 4.8489152, lat: 52.360814900000001 }, { lng: 4.8487824, lat: 52.357865799999999 }, { lng: 4.8504012, lat: 52.357855299999997 }, { lng: 4.8518982, lat: 52.357844 }, { lng: 4.8538275, lat: 52.358129499999997 }, { lng: 4.854723, lat: 52.357862900000001 }, { lng: 4.854635, lat: 52.357753199999998 }, { lng: 4.85436, lat: 52.357297500000001 }, { lng: 4.8540881, lat: 52.356402600000003 }, { lng: 4.8547969, lat: 52.356275799999999 }, { lng: 4.8698903, lat: 52.360106700000003 }, { lng: 4.8699397, lat: 52.360023099999999 }, { lng: 4.8714122, lat: 52.360373699999997 }, { lng: 4.8712647, lat: 52.360563399999997 }, { lng: 4.8715288, lat: 52.360599700000002 }, { lng: 4.8716826, lat: 52.360427700000002 }, { lng: 4.8738605, lat: 52.360853300000002 }, { lng: 4.8738525, lat: 52.361021299999997 }, { lng: 4.8740097, lat: 52.361040699999997 }, { lng: 4.8741351, lat: 52.360893500000003 }, { lng: 4.8750611, lat: 52.360804100000003 }, { lng: 4.8756501, lat: 52.360613800000003 }, { lng: 4.876429, lat: 52.3607996 }, { lng: 4.8765642, lat: 52.360617699999999 }, { lng: 4.876929, lat: 52.360695700000001 }, { lng: 4.8768495, lat: 52.360911000000002 }, { lng: 4.8771709, lat: 52.360969599999997 }, { lng: 4.8774, lat: 52.360758300000001 }, { lng: 4.8819952, lat: 52.362042700000003 }, { lng: 4.8813956, lat: 52.363081800000003 }, { lng: 4.8808146, lat: 52.363490400000003 }, { lng: 4.8793708, lat: 52.3643261 }, { lng: 4.8792691, lat: 52.364957400000002 }, { lng: 4.8787082, lat: 52.365820599999999 }, { lng: 4.8775395, lat: 52.366781500000002 }, { lng: 4.8767523, lat: 52.368511699999999 }, { lng: 4.8754901, lat: 52.369786699999999 }, { lng: 4.8745065, lat: 52.3718772 }, { lng: 4.8745782, lat: 52.3725454 }, { lng: 4.8753796, lat: 52.373407 }, { lng: 4.8755899, lat: 52.374302499999999 }, { lng: 4.8799131, lat: 52.3813052 }, { lng: 4.8796339, lat: 52.381912800000002 }, { lng: 4.880478, lat: 52.3822531 }, { lng: 4.8818058, lat: 52.384352800000002 }, { lng: 4.882637, lat: 52.385410700000001 }, { lng: 4.8846503, lat: 52.388346599999998 }, { lng: 4.8857963, lat: 52.388147600000003 }, { lng: 4.8911796, lat: 52.388450200000001 }, { lng: 4.8937804, lat: 52.388671199999997 }, { lng: 4.8956658, lat: 52.3888313 }, { lng: 4.8927982, lat: 52.3933453 }, { lng: 4.8850924, lat: 52.398823999999998 }, { lng: 4.8762366, lat: 52.394528700000002 }, { lng: 4.8726422, lat: 52.394820600000003 }, { lng: 4.8719896, lat: 52.394719199999997 }, { lng: 4.8719508, lat: 52.395276600000003 }, { lng: 4.8715979, lat: 52.395380000000003 }, { lng: 4.8667403, lat: 52.393135999999998 }, { lng: 4.8643092, lat: 52.392707199999997 }, { lng: 4.8627057, lat: 52.393852099999997 }, { lng: 4.8603441, lat: 52.394938199999999 }, { lng: 4.858593, lat: 52.3952782 }, { lng: 4.8569204, lat: 52.395366699999997 }, { lng: 4.8569896, lat: 52.393836299999997 }, { lng: 4.8573172, lat: 52.393842399999997 }, { lng: 4.8574043, lat: 52.3920751 }, { lng: 4.8589526, lat: 52.391222599999999 }, { lng: 4.8592744, lat: 52.390543399999999 }, { lng: 4.8592929, lat: 52.388789899999999 }, { lng: 4.8449045, lat: 52.388773299999997 }, { lng: 4.8451066, lat: 52.3850658 }, { lng: 4.8446526, lat: 52.385063799999998 }, { lng: 4.8390117, lat: 52.385024100000003 }, { lng: 4.8392807, lat: 52.382968699999999 }, { lng: 4.838548, lat: 52.380876600000001 }, { lng: 4.836707, lat: 52.376358099999997 }, { lng: 4.8353454, lat: 52.37312649999999 }];

	map.data.setStyle({
	strokeColor: '#d00',
	strokeOpacity: 1,
	strokeWeight: 2,
	fillColor: '#000',
	fillOpacity: 0.2
	});

	map.data.add({
	geometry: new google.maps.Data.Polygon( [everythingElse, westPloygon] )
	})

	// ideas.forEach(function( idea ) {
	//		 if( !idea.location ) return;
	//		 var point	= idea.location;
	//		 var marker = initMarker({
	//			 position	 : {lat: point.coordinates[0], lng: point.coordinates[1]},
	//			 map			 : map,
	//			 clickable : false,
	//			 icon			 : {
	//				 url		 : '/img/flag_small.svg',
	//				 size		 : new google.maps.Size(22, 24),
	//				 anchor	 : new google.maps.Point(4, 21)
	//			 }
	//		 });
	//		 // marker.addListener('click', function() {
	//		 //		 window.location.href = '/originele-plannen/plan/'+idea.id;
	 //		 // });
	 // });
{% endmacro %}


