{% macro map( googleKey='', ideaId, editorInputElementId='' ) %}
	
	<script src="https://maps.googleapis.com/maps/api/js?key={{googleKey}}"></script>
	<script src="/js/openstad-map.js"></script>
	<div id="map" style="width: 100%; height: 100%;"></div>

	<script>

	 if ('{{editorInputElementId}}') {
		 var editorInputElement = document.getElementById('{{editorInputElementId}}');
		 var editorMarker = {
			 icon     : {
				 url    : '/img/idea/flag-red.svg',
				 size   : [22, 24],
				 anchor : [ 4, 21],
			 }
		 }
	 }

	 var map = new OpenStadMap(
		 {% if config.openStadMap.defaults %}{{ config.openStadMap.defaults | dump | safe }}{% else %}null{% endif %},
		 {% if ideaId %}{{ideaId}}{% else %}null{% endif %},
		 {% if config.openStadMap.markerStyle %}{{ config.openStadMap.markerStyle | dump | safe }}{% else %}null{% endif %},
		 {% if config.openStadMap.polygonStyle %}{{ config.openStadMap.polygonStyle | dump | safe }}{% else %}null{% endif %},
		 editorInputElement,
		 editorMarker
	 );
	 
	</script>

{% endmacro %}
