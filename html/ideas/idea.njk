{% extends '../base.njk' %}

{% set pageTitle = 'Idee: '+idea.title %}

{% block content %}
	<h1>{{idea.title}}</h1>

	{{idea.description}}

	<hr>

	{% if can('idea:edit') %}
	<form class="action" action="/idea/{{idea.id}}/edit">
		<input type="submit" value="Bewerk idee">
	</form>
	{% endif %}
	
	{% if can('idea:delete') %}
		<form class="action" method="POST" action="/idea/{{idea.id}}/delete">
			<input type="hidden" name="_method" value="DELETE">
			<input type="hidden" name="_csrf" value="{{csrfToken}}">
			<input type="submit" value="Verwijder idee">
		</form>
	{% endif %}

	{% if can('idea:vote') %}
		<form class="action vote" method="POST" action="/idea/{{idea.id}}/vote">
			<input type="hidden" name="_csrf" value="{{csrfToken}}">
			<input type="submit" name="yes" value="+ ({{idea.yes}})">
			<input type="submit" name="no" value="- ({{idea.no}})">
			<input type="submit" name="abstain" value="~ ({{idea.abstain}})">
		</form>
	{% endif %}
	
	{% if can('idea:admin') %}
		<hr>
		
		<form method="POST" action="/idea/{{idea.id}}/status">
			<select name="status">
				<option {{'selected' if idea.status=='RUNNING'}}  value="RUNNING">Open</option>
				<option {{'selected' if idea.status=='ACCEPTED'}} value="ACCEPTED">Geaccepteerd</option>
				<option {{'selected' if idea.status=='DENIED'}}   value="DENIED">Afgewezen</option>
				<option {{'selected' if idea.status=='BUSY'}}     value="BUSY">In behandeling</option>
				<option {{'selected' if idea.status=='DONE'}}     value="DONE">Afgerond</option>
			</select>
			<input type="hidden" name="_method" value="PUT">
			<input type="hidden" name="_csrf" value="{{csrfToken}}">
			<input type="submit" value="Pas aan">
		</form>
	{% endif %}
{% endblock %}