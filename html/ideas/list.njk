{% extends '../ideas.njk' %}
{% import '../includes/secondary.njk' as sec %}

{% set pageTitle    = 'Ideeën' %}
{% set contentClass = 'ideasList' %}

{% block content %}
	<div id="map">
		<div class="image"></div>
	</div>
	
	<div class="primary">
		{{sec.speechBubble()}}
		
		<a href="/hoe-werkt-het" id="howDoesItWork">Hoe werkt het?</a>
		
		<h2>Bewonersideeën voor West</h2>
		
		{# Weird formatting because of `display: inline-block` #}
		{% for idea in runningIdeas
		%}<div class="tile {{idea.status}} {{'USER' if user.id == idea.userId}}">
				<a href="/idea/{{idea.id}}">
				<div class="duration">
				{% if idea.duration > 0 %}
					Nog {{idea.duration | duration}}
				{% else %}
					Afgelopen
				{% endif %}
					
				</div>
				
				<div class="image"></div>
				<h3>{{idea.title}}</h3>
				{{idea.summary}}
				
				<div class="ideaProgress">
					<div class="bar" style="width: {{idea.progress}}%"></div>
				</div>
				
				<div class="ideaStats">
					<div class="count yes">{{idea.yes}}</div>
					<div class="count no">{{idea.no}}</div>
					<div class="count arguments">{{idea.argCount}}</div>
				</div>
				</a>
			</div>{%
		else %}
			<i>Nog geen ideeën!</i>
		{% endfor %}
		
		{% if can('ideas:archive') %}
		<a href="/ideas/archive" id="viewArchive">Bekijk het archief</a>
		{% endif %}
	</div>
	
	<div class="secondary">
		{{sec.speechBubble()}}
		
		{{sec.highlightedIdeas(highlightedIdeas)}}
		
		{{sec.agenda(upcomingMeetings)}}
	</div>
{% endblock %}